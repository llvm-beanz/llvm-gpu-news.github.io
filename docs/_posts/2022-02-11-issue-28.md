---
layout: post
title:  "Issue #28"
date:   2022-02-11   12:00:00 -0500
author: Jakub Kuderski, Alexey Bader, Joseph Huber
draft:  true
---

Welcome to LLVM GPU News, a bi-weekly newsletter on all the GPU things under the LLVM umbrella.
This issue covers the period from January 28 to February 10 2022.

We welcome your feedback and suggestions. Let us know if we missed anything interesting, or want us to bring attention to your (sub)project, revisions under review, or proposals. Please see [the bottom of the page](https://llvm-gpu-news.github.io/about/) for details on how to submit suggestions and contribute.


## Industry News and Conferences

*  I

##  LLVM and Clang

### Discussions

*  D

### Commits

*  A


## MLIR

### Discussions

*  D

### Commits

*  R

## OpenMP (Target Offloading)

### Discussions

*  1

### Commits

*  Removed the hard limit of number of teams (65536) for Nvidia GPUs. [D119313](https://reviews.llvm.org/D119313)
*  Fixed a performance regression in `BabelStream`. [D119187](https://reviews.llvm.org/D119187)
*  Fixed shadow map traversals creating an infinite loop in `TestSNAP`. [D119471](https://reviews.llvm.org/D119471)
*  Fixed a bug where an AMDGPU barrier was not actually aligned but treated as such. [ede248e](https://github.com/llvm/llvm-project/commit/ede248e614bb2c232b7b1815829eb3d5c1aab1e4)
*  The new OpenMP offloading driver landed and now in the test suite. [D116541](https://reviews.llvm.org/D116541), [D118637](https://reviews.llvm.org/D118637).
*  Completely removed the old device runtime. The `-fopenmp-target-new-runtime` option is now deprecated. [D118934](https://reviews.llvm.org/D118934)


## External Compilers

### LLPC

### oneAPI DPC++

#### CUDA/HIP support

*  Added HIP AMD support for `ilogb`, `log2`, and `remainder`. [DPCPP#5272](https://github.com/intel/llvm/pull/5272)
*  Added generic address space implementation for `frexp`, `modf`, and `sincos` built-ins on the HIP backend. [DPCPP#5377](https://github.com/intel/llvm/pull/5377)
*  Added CUDA-specific values for memory advice query. [DPCPP#5090](https://github.com/intel/llvm/pull/5090)
*  Made PTXAS the optimization level default to `-O3` to fix issues caused by optimization levels inconsistencies between PTXAS and clang compilers. [DPCPP#5188](https://github.com/intel/llvm/pull/5188)
*  Added bitwise reductions for CUDA. [DPCPP#5416](https://github.com/intel/llvm/pull/5416)
*  Added the `-fsycl-fp32-prec-sqrt` flag to enable high precision `sqrt` implementation. [DPCPP#5309](https://github.com/intel/llvm/pull/5309)

#### SYCL 2020 support

*  Old style `sycl::atomics` are deprecated in the SYCL 2020 mode. [DPCPP#5440](https://github.com/intel/llvm/pull/5440)

#### Non-standard extensions

##### Explicit SIMD

*  Updated `README.md` ([DPCPP#5515](https://github.com/intel/llvm/pull/5515)) and Doxygen documentation ([DPCPP#5531](https://github.com/intel/llvm/pull/5531), [DPCPP#5485](https://github.com/intel/llvm/pull/5485), [DPCPP#5472](https://github.com/intel/llvm/pull/5472), and [DPCPP#5443](https://github.com/intel/llvm/pull/5443)).
*  Fixed merge ([DPCPP#5490](https://github.com/intel/llvm/pull/5490)) and public `simd` and `simd_view` APIs ([DPCPP#5465](https://github.com/intel/llvm/pull/5465)).
*  Removed deprecated APIs. ([DPCPP#5402](https://github.com/intel/llvm/pull/5402), [DPCPP#5426](https://github.com/intel/llvm/pull/5426))
*  `esimd::saturate`: updated saturation usage interface and cleanup APIs. [DPCPP#5507](https://github.com/intel/llvm/pull/5507), [DPCPP#5441](https://github.com/intel/llvm/pull/5441)
*  Optimized out loops in popular simd constructors. [DPCPP#5425](https://github.com/intel/llvm/pull/5425)

##### Matrix

*  Fixed the bug of comparison between two `bf16`'s `wi_element`. [DPCPP#5493](https://github.com/intel/llvm/pull/5493)
*  Added support for `bf16`'s `wi_element`. [DPCPP#5397](https://github.com/intel/llvm/pull/5397)

##### FPGA

*  Added support for the `[[intel::loop_count()]]` attribute. [DPCPP#5520](https://github.com/intel/llvm/pull/5520)
*  Refactored the `[[intel::max_work_group_size()]]` attribute implementation. [DPCPP#5392](https://github.com/intel/llvm/pull/5392)

##### `std::complex` support

*  Added complex support to group algorithms. [DPCPP#5394](https://github.com/intel/llvm/pull/5394)

##### Device global

*  Updated device global design document. [DPCPP#5525](https://github.com/intel/llvm/pull/5525), [DPCPP#5432](https://github.com/intel/llvm/pull/5432)
*  Started implementation with initial `device_global` registration. [DPCPP#5499](https://github.com/intel/llvm/pull/5499)

##### Optional device features

*  Allowed the `[[sycl::device_has]]` attribute on a SYCL kernel. [DPCPP#5503](https://github.com/intel/llvm/pull/5503)

#### Misc

*  Made documentation layout restructuring inside the `sycl/doc` directory. [DPCPP#5437](https://github.com/intel/llvm/pull/5437), [DPCPP#5439](https://github.com/intel/llvm/pull/5439), [DPCPP#5381](https://github.com/intel/llvm/pull/5381), [DPCPP#5436](https://github.com/intel/llvm/pull/5436), [DPCPP#5421](https://github.com/intel/llvm/pull/5421), [DPCPP#5405](https://github.com/intel/llvm/pull/5405), [DPCPP#5463](https://github.com/intel/llvm/pull/5463), [DPCPP#5453](https://github.com/intel/llvm/pull/5453), [DPCPP#5470](https://github.com/intel/llvm/pull/5470), [DPCPP#5452](https://github.com/intel/llvm/pull/5452), [DPCPP#5456](https://github.com/intel/llvm/pull/5456), [DPCPP#5458](https://github.com/intel/llvm/pull/5458), [DPCPP#5459](https://github.com/intel/llvm/pull/5459), [DPCPP#5454](https://github.com/intel/llvm/pull/5454), [DPCPP#5451](https://github.com/intel/llvm/pull/5451)
*  Added new proposals for `sub_group::load`/`store` extension ([DPCPP#5523](https://github.com/intel/llvm/pull/5523)) and new free function queries ([DPCPP#5106](https://github.com/intel/llvm/pull/5106)).
*  Added code instrumentation for the tools supporting XPTI (i.e., profilers, dynamic analyzers, etc.). [DPCPP#5391](https://github.com/intel/llvm/pull/5391), [DPCPP#5259](https://github.com/intel/llvm/pull/5259), [DPCPP#4998](https://github.com/intel/llvm/pull/4998), [DPCPP#5335](https://github.com/intel/llvm/pull/5335), [DPCPP#5533](https://github.com/intel/llvm/pull/5533)
*  Improved Level Zero backed support:
   *  Emit more informative error at command execution failure. [DPCPP#5524](https://github.com/intel/llvm/pull/5524)
   *  Emit program build logs for warning `levels >= 2`. [DPCPP#5319](https://github.com/intel/llvm/pull/5319)
   *  Avoid resetting same command list multiple times. [DPCPP#5529](https://github.com/intel/llvm/pull/5529)
   *  Fix memory leak in USM prefetch ([DPCPP#5461](https://github.com/intel/llvm/pull/5461)) and a possible null pointer de-reference ([DPCPP#5521](https://github.com/intel/llvm/pull/5521)).
   *  Refine support for query of USM capabilities. [DPCPP#5442](https://github.com/intel/llvm/pull/5442)
   *  Relax the mutex lock duration during queue finish operation. [DPCPP#5406](https://github.com/intel/llvm/pull/5406)
*  Added compiler diagnostics for explicit cast from default address space to a named one. [DPCPP#5500](https://github.com/intel/llvm/pull/5500)
*  Turned off parts of the `SimplifyCFG` optimization pass breaking th "convergent" functions semantic in the SYCL mode. [DPCPP#5283](https://github.com/intel/llvm/pull/5283)
*  Initial support for allowing fat static `-lname` processing. [DPCPP#5413](https://github.com/intel/llvm/pull/5413)
*  Fallback implementation of the `assert` functions has been disabled by default. [DPCPP#4694](https://github.com/intel/llvm/pull/4694)
*  Allowed calls through constant expr function pointers. [DPCPP#5390](https://github.com/intel/llvm/pull/5390)
